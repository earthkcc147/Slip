import os
from function import login
from function import create_fake_receipt
from function.send.discord_id import send_to_user  # р╣Бр╕Бр╣Йр╣Др╕Вр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Гр╕лр╣Йр╣Гр╕Кр╣Й send_to_user

# р╣Ар╕гр╕╡р╕вр╕Бр╣Гр╕Кр╣Йр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ login р╕Бр╣Ир╕нр╕Щр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕кр╕ер╕╡р╕Ыр╕Ыр╕ер╕нр╕б
if login():
    # р╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
    name_user_id = input("р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Вр╕нр╕Щр╕Ир╣Ир╕▓р╕в: ")
    name_me_id = input("р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╕гр╕▒р╕Ър╣Ар╕Зр╕┤р╕Щ: ")
    phone_me_id = input("р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣Мр╕Ьр╕╣р╣Йр╕гр╕▒р╕Ъ: ")
    money_id = input("р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕Зр╕┤р╕Щ: ")

    # р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Бр╕гр╕нр╕Б
    print("\nЁЯУЭ р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Чр╕╡р╣Ир╕Бр╕гр╕нр╕Б:")
    print(f"ЁЯСд р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Вр╕нр╕Щр╕Ир╣Ир╕▓р╕в: {name_user_id}")
    print(f"ЁЯТ╡ р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕Зр╕┤р╕Щ: {money_id} р╕Ър╕▓р╕Ч")
    print(f"ЁЯСитАНЁЯТ╗ р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╕гр╕▒р╕Ър╣Ар╕Зр╕┤р╕Щ: {name_me_id}")
    print(f"ЁЯУЮ р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣Мр╕Ьр╕╣р╣Йр╕гр╕▒р╕Ъ: {phone_me_id}")

    # р╣Ар╕гр╕╡р╕вр╕Бр╣Гр╕Кр╣Йр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Гр╕Щр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕кр╕ер╕╡р╕Ыр╕Ыр╕ер╕нр╕б
    print("\nЁЯФи р╕Бр╕│р╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕кр╕ер╕╡р╕Ыр╕Ыр╕ер╕нр╕б... тП│")
    image_path = create_fake_receipt(name_user_id, name_me_id, phone_me_id, money_id)

    # р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╕кр╕ер╕╡р╕Ыр╕Ыр╕ер╕нр╕б
    print("\nЁЯОЙ р╕кр╕ер╕╡р╕Ыр╕Ыр╕ер╕нр╕бр╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╕░р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з! ЁЯЦ╝я╕П")
    print("ЁЯУВ р╕ар╕▓р╕Юр╕Цр╕╣р╕Бр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М 'textnew'")

    # р╕кр╕гр╣Йр╕▓р╕Зр╕Кр╕╖р╣Ир╕нр╣Др╕Яр╕ер╣Мр╣Гр╕лр╕бр╣И
    image_filename = f"{name_user_id}_{name_me_id}_{money_id}_{phone_me_id}.png"
    image_path = os.path.abspath(os.path.join(os.path.dirname(__file__), "textnew", image_filename))

    # р╕кр╕гр╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Юр╕гр╣Йр╕нр╕бр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б
    message = (
        f"ЁЯОЙ р╕кр╕ер╕╡р╕Ыр╕Ыр╕ер╕нр╕бр╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в! \n"
        f"ЁЯУД р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф: \n"
        f"ЁЯСд р╕Ьр╕╣р╣Йр╣Вр╕нр╕Щ: {name_user_id}\n"
        f"ЁЯСе р╕Ьр╕╣р╣Йр╕гр╕▒р╕Ъ: {name_me_id}\n"
        f"ЁЯУЮ р╣Ар╕Ър╕нр╕гр╣Мр╕Ьр╕╣р╣Йр╕гр╕▒р╕Ъ: {phone_me_id}\n"
        f"ЁЯТ╡ р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕Зр╕┤р╕Щ: {money_id}.00 р╕Ър╕▓р╕Ч"
    )

    # р╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Ир╕▓р╕Бр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
    should_send = input("р╕Др╕╕р╕Ур╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Др╕Ыр╕вр╕▒р╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й Discord р╕лр╕гр╕╖р╕нр╣Др╕бр╣И? (y/n): ").lower()

    if should_send == "y":
        user_id = input("р╕Бр╕гр╕╕р╕Ур╕▓р╣Гр╕кр╣И ID р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й Discord: ").strip()
        send_to_user(user_id, image_path, message)
    else:
        print("р╕вр╕Бр╣Ар╕ер╕┤р╕Бр╕Бр╕▓р╕гр╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б тЬЕ")

else:
    print("р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╣Др╕Фр╣Й тЭМ")